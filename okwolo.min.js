!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){var t=function(t){return void 0!==t},e=function(t){return null===t},n=function(t){return Array.isArray(t)},o=function(t){return"function"==typeof t},i=function(t){return"string"==typeof t},a=function(t){return!!t&&t.constructor===Object},u=function(t){return!!(t&&t.tagName&&t.nodeName&&t.ownerDocument&&t.removeAttribute)},c=function t(e){if(n(e))return e.map(function(e){return t(e)});if("object"===(void 0===e?"undefined":r(e))&&e){var o=Object.keys(e),i={};return o.forEach(function(n){i[n]=t(e[n])}),i}return e},s=function(t){throw new Error("@okwolo."+t)},f=function(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];var i=function(t){return"\n>>> "+String(JSON.stringify(t,function(t,e){return"function"==typeof e?e.toString():e},2)).replace(/\n/g,"\n    ")};t||(r.length>0&&(e+=r.map(i).join("")),s(e||"assertion has failed"))},d=function(){var e=[],n=function(){var n=e[0];t(n)&&n()};return{add:function(t){f(o(t),"utils.makeQueue.add : added objects must be a function",t),e.push(t),1===e.length&&n()},done:function(){e.shift(),n()}}},l={};return{deepCopy:c,err:s,assert:f,isDefined:t,isNull:e,isArray:n,isFunction:o,isString:i,isObject:a,isNode:u,makeQueue:d,blobHandler:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2];if(f(a(n),"utils.blobHandler : blob is not an object",n),t(n.name)){if(f(i(n.name),"utils.blobHandler : a blob name must be a string",n,n.name),!0===l[n.name])return null;l[n.name]=!0}return Object.keys(n).map(function(o){var i=[].concat(n[o]);return t(e[o])?i.map(function(n){return t(r)?(r.add(function(){e[o](n),r.done()}),null):e[o](n)}):i.map(function(){return null})})}}};t.exports=o},function(t,e,n){"use strict";var r=n(2),o=n(4),i=n(5),a=n(8)(),u=n(0)(),c=u.isFunction,s=u.assert,f=u.deepCopy,d=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,n=r(t,e),u=o(),d=i(e),l={},p=l,h=function(t){return[n,u,d].map(function(e){return e.use(t)})};[a].forEach(function(t){return h(t)}),h({watcher:function(t){return p=t}}),h({watcher:function(t){return h({state:t})}}),h({action:{type:"__OVERRIDE__",target:[],handler:function(t,e){return e}}});var v=function(){h({state:p})},g=function(t,e){if(s(p!==l||"__OVERRIDE__"===t,"act : cannot act on state before it has been set"),c(t))return void u.act(p,"__OVERRIDE__",t(f(p)));u.act(p,t,e)},b=function(t){if(c(t))return void g("__OVERRIDE__",t(f(p)));g("__OVERRIDE__",t)},m=function(t,e){if(c(t))return void h({builder:t()});h({route:{path:t,callback:function(t){h({builder:e(t)})}}})},y=function(){g("UNDO",{})},w=function(){g("REDO",{})},x=function(){return s(p!==l,"getState : cannot get state before it has been set"),f(p)};return Object.assign(m,{setState:b,getState:x,redirect:d.redirect,show:d.show,act:g,use:h,update:v,undo:y,redo:w})};void 0!==t&&t.exports&&(t.exports=d),"undefined"!=typeof window&&(window.okwolo=d)},function(t,e,n){"use strict";var r=n(0)(),o=r.assert,i=r.isDefined,a=r.isFunction,u=r.deepCopy,c=r.blobHandler,s=n(3),f=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,n=void 0,r=void 0,f=void 0,d=void 0,l=void 0,p=void 0,h=void 0,v=void 0,g=void 0,b=function(t){var e=v(t);return d&&(e=d(e)),e=f(e),l&&(e=l(e)),e},m=!1,y=function(){m=!0,p=n(h,p)},w=function(t){i(h)&&i(v)&&i(g)&&t()},x=function(t){o(a(t),"dom.replaceDraw : new draw is not a function",t),n=t,w(y)},O=function(t){o(a(t),"dom.replaceUpdate : new target updater is not a function",t),r=t},E=function(t){o(a(t),"dom.replaceBuild : new build is not a function",t),f=t,w(function(){return r(h,b(g),p)})},j=function(t){o(a(t),"dom.replacePrebuild : new prebuild is not a function",t),d=t,w(function(){return r(h,b(g),p)})},D=function(t){o(a(t),"dom.replacePostbuild : new postbuild is not a function",t),l=t,w(function(){return r(h,b(g),p)})},_=function(t){h=t,w(y)},S=function(t){o(a(t),"dom.replaceBuilder : builder is not a function",t),v=t,w(function(){m||y(),p=r(h,b(g),p)})},k=function(t){o(i(t),"dom.updateState : new state is not defined",t),g=t,w(function(){m||y(),p=r(h,b(g),p)})},R=function(t){var e={};return Object.keys(t).map(function(n){return e[n]=[t[n]]}),i(t.name)&&(e.name=t.name),c({target:_,builder:S,state:k,draw:x,update:O,build:E,prebuild:j,postbuild:D},e)};i(t)&&R({target:t}),R(s(e));var N=function(t){if(a(t))return void R({state:t(g)});R({state:t})},M=function(){return u(g)};return Object.assign(S,{use:R,setState:N,getState:M})};t.exports=f},function(t,e,n){"use strict";var r=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=n(0)(),i=o.assert,a=o.isDefined,u=o.isNull,c=o.isArray,s=o.isString,f=o.isNode,d=o.isObject,l=o.isFunction,p=o.makeQueue,h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,e=function e(n){if(a(n.text))return n.DOM=t.document.createTextNode(n.text),n;var r=t.document.createElement(n.tagName);return Object.keys(n.attributes).forEach(function(t){r[t]=n.attributes[t]}),Object.keys(n.children).forEach(function(t){n.children[t]=e(n.children[t]),r.appendChild(n.children[t].DOM)}),n.DOM=r,n},n=function(t,e){return Object.keys(Object.assign({},t,e)).filter(function(n){var r=t[n],o=e[n];return!(r!==Object(r)&&o!==Object(o)&&r===o)})};return{draw:function(n,r){return i(f(n),"dom.draw : target is not a DOM node",n),a(r)||(r={text:""}),r=e(r),t.requestAnimationFrame(function(){n.innerHTML="",n.appendChild(r.DOM)}),r},update:function(r,o,u){i(f(r),"dom.update : target is not a DOM node",r);var c=p();t.requestAnimationFrame(function(){c.add(function(){s(u,o,{DOM:r,children:[u]},0),c.done()})});var s=function t(r,o,i,u){if(a(r)||a(o)){if(!a(r))return i.children[u]=e(o),void i.DOM.appendChild(i.children[u].DOM);if(!a(o))return i.DOM.removeChild(r.DOM),void c.add(function(){delete i.children[u],c.done()});if(r.tagName!==o.tagName){var s=r.DOM,f=e(o);return i.DOM.replaceChild(f.DOM,s),void(a(f.text)?(i.children[u].DOM=f.DOM,i.children[u].text=f.text,delete i.children[u].tagName,delete i.children[u].attributes,delete i.children[u].children):(i.children[u].DOM=f.DOM,delete i.children[u].text,i.children[u].tagName=f.tagName,i.children[u].attributes=f.attributes,i.children[u].children=f.children))}if(3===r.DOM.nodeType)r.text!==o.text&&(r.DOM.nodeValue=o.text,r.text=o.text);else{var d=n(r.attributes,o.attributes);0!==d.length&&d.forEach(function(t){r.attributes[t]=o.attributes[t],r.DOM[t]=o.attributes[t]})}var l=Object.keys(r.children||{}).concat(Object.keys(o.children||{})),p={};l.forEach(function(e){void 0===p[e]&&(p[e]=!0,t(r.children[e],o.children[e],r,e))})}};return u},build:function t(e){if(u(e))return{text:""};if(s(e))return{text:e};if(i(c(e),"dom.build : vdom object is not an array or string",e),l(e[0])){var n=e[1]||{};i(d(n),"dom.build : component's props is not an object",e,n);var o=e[2]||[];return i(c(o),"dom.build : component's children is not an array",e,o),t(e[0](Object.assign({},n,{children:o})))}var f=r(e,3),p=f[0],h=f[1],v=f[2];i(s(p),"dom.build : tag property is not a string",e,p);var g=/^ *(\w+) *(?:#([-\w\d]+))? *((?:\.[-\w\d]+)*)? *(?:\|\s*([^\s]{1}[^]*?))? *$/.exec(p);i(c(g),"dom.build : tag property cannot be parsed",p);var b=r(g,5),m=b[1],y=b[2],w=b[3],x=b[4];return null==h&&(h={}),i(d(h),"dom.build : attributes is not an object",e,h),a(y)&&!a(h.id)&&(h.id=y.trim()),a(w)&&(a(h.className)||(h.className=""),h.className+=w.replace(/\./g," "),h.className=h.className.trim()),a(x)&&(a(h.style)?(h.style+=";"+x,h.style=h.style.replace(/;;/g,";")):h.style=x),a(v)?i(c(v),"dom.build : children of vdom object is not an array",e,v):v=[],{tagName:m,attributes:h,children:v.map(function(e){return t(e)})}}}};t.exports=h},function(t,e,n){"use strict";var r=n(0)(),o=r.assert,i=r.deepCopy,a=r.makeQueue,u=r.blobHandler,c=r.isDefined,s=r.isArray,f=r.isFunction,d=r.isString,l=function(){var t={},e=[],n=[],r=a(),l=function(e,a,u){var l=i(e);o(c(t[a]),"state.execute : action type '"+a+"' was not found"),t[a].forEach(function(t){var n=t.target;f(n)&&(n=n(i(e),u),o(s(n),"state.execute : dynamic target of action "+a+" is not an array",n),n.forEach(function(t){o(d(t),"state.execute : dynamic target of action "+a+" is not an array of strings",n)}));var r=i(l);if(n.length>0){var p=l;n.forEach(function(e,i){if(o(c(r[e]),"state.execute : target of action "+a+" does not exist: @state."+n.slice(0,i+1).join(".")),i===n.length-1){var s=t.handler(r[e],u);o(c(s),"state.execute : result of action "+a+" on target @state"+n.join(".")+" is undefined"),p[e]=s}else r=r[e],p=p[e]})}else l=t.handler(r,u),o(c(l),"state.execute : result of action "+a+" on target @state is undefined")}),n.forEach(function(t){t(i(l),a,u)}),r.done()},p=function(t,n,r){var o=[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;l(e,o,i)}];e.reverse().forEach(function(e,a){o[a+1]=function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;t=u,n=c,r=s,e(o[a],i(u),c,s)}}),o[e.length](i(t),n,r)},h=function(e){var n=e.type,r=e.handler,i=e.target;o(d(n),"state.addAction : action's type is not a string",e,n),o(f(r),"state.addAction : handler for action "+n+" is not a function",e,r),s(i)?i.forEach(function(t){o(d(t),"state.addAction : target of action "+n+" is not an array of strings",e,i)}):o(f(i),"state.addAction : target of action "+n+" is not valid",i),void 0===t[n]?t[n]=[e]:t[n].push(e)},v=function(t){o(f(t),"state.addMiddleware : middleware is not a function",t),e.push(t)},g=function(t){o(f(t),"state.addWatcher : watcher is not a function",t),n.push(t)};return{act:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o(d(e),"state.act : action type is not a string",e),o(c(t),"state.act : cannot call action "+e+" on an undefined state",t),r.add(function(){p(t,e,n)})},use:function(t){return u({action:h,middleware:v,watcher:g},t,r)}}};t.exports=l},function(t,e,n){"use strict";var r=n(6),o=n(0)(),i=o.assert,a=o.isString,u=o.isObject,c=o.isFunction,s=o.blobHandler,f=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,e=null!==t.document.origin&&"null"!==t.document.origin,n=[],o="",f=!1,d=function(t){return t.replace(new RegExp("^"+o),"")||""},l=t.location.pathname;e||(l="");var p=function(t){return function(e,n){t.push({pattern:r(e,[],{strict:!0}),callback:n})}},h=function(t){return function(e,n){var r=!1;return t.find(function(t){var o=t.pattern.exec(e);if(null!==o)return r=!0,o.shift(),t.pattern.keys.forEach(function(t,e){n[t.name]=o[e]}),t.callback(n),r}),r}};t.onpopstate=function(){l=d(t.location.pathname),h(n)(l,t.history.state||{})};var v=function(e){var r=e.path,o=e.callback;if(i(a(r),"router.addRoute : path is not a string",r),i(c(o),"router.addRoute : callback is not a function",r,o),p(n)(r,o),!f){var u=[];p(u)(r,o),f=!!h(u)(l,t.history.state||{})}},g=function(e){i(a(e),"router.replaceBaseUrl : base url is not a string",e),o=e,l=d(l),h(n)(l,t.history.state||{})};return{redirect:function(r){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(a(r),"router.redirect : path is not a string",r),i(u(c),"router.redirect : params is not an object",c),l=r,e?t.history.pushState({},"",(o+l).replace(/^\/C\:/,"")):console.log("@okwolo/router:: path changed to\n>>> "+l),h(n)(l,c)},show:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(a(t),"router.show : path is not a string",t),i(u(e),"router.show : params is not an object",e),h(n)(t,e)},use:function(t){return s({route:v,base:g},t)}}};t.exports=f},function(t,e,n){function r(t,e){for(var n,r=[],o=0,i=0,a="",u=e&&e.delimiter||"/";null!=(n=m.exec(t));){var f=n[0],d=n[1],l=n.index;if(a+=t.slice(i,l),i=l+f.length,d)a+=d[1];else{var p=t[i],h=n[2],v=n[3],g=n[4],b=n[5],y=n[6],w=n[7];a&&(r.push(a),a="");var x=null!=h&&null!=p&&p!==h,O="+"===y||"*"===y,E="?"===y||"*"===y,j=n[2]||u,D=g||b;r.push({name:v||o++,prefix:h||"",delimiter:j,optional:E,repeat:O,partial:x,asterisk:!!w,pattern:D?s(D):w?".*":"[^"+c(j)+"]+?"})}}return i<t.length&&(a+=t.substr(i)),a&&r.push(a),r}function o(t,e){return u(r(t,e))}function i(t){return encodeURI(t).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function a(t){return encodeURI(t).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function u(t){for(var e=new Array(t.length),n=0;n<t.length;n++)"object"==typeof t[n]&&(e[n]=new RegExp("^(?:"+t[n].pattern+")$"));return function(n,r){for(var o="",u=n||{},c=r||{},s=c.pretty?i:encodeURIComponent,f=0;f<t.length;f++){var d=t[f];if("string"!=typeof d){var l,p=u[d.name];if(null==p){if(d.optional){d.partial&&(o+=d.prefix);continue}throw new TypeError('Expected "'+d.name+'" to be defined')}if(b(p)){if(!d.repeat)throw new TypeError('Expected "'+d.name+'" to not repeat, but received `'+JSON.stringify(p)+"`");if(0===p.length){if(d.optional)continue;throw new TypeError('Expected "'+d.name+'" to not be empty')}for(var h=0;h<p.length;h++){if(l=s(p[h]),!e[f].test(l))throw new TypeError('Expected all "'+d.name+'" to match "'+d.pattern+'", but received `'+JSON.stringify(l)+"`");o+=(0===h?d.prefix:d.delimiter)+l}}else{if(l=d.asterisk?a(p):s(p),!e[f].test(l))throw new TypeError('Expected "'+d.name+'" to match "'+d.pattern+'", but received "'+l+'"');o+=d.prefix+l}}else o+=d}return o}}function c(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function s(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function f(t,e){return t.keys=e,t}function d(t){return t.sensitive?"":"i"}function l(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return f(t,e)}function p(t,e,n){for(var r=[],o=0;o<t.length;o++)r.push(g(t[o],e,n).source);return f(new RegExp("(?:"+r.join("|")+")",d(n)),e)}function h(t,e,n){return v(r(t,n),e,n)}function v(t,e,n){b(e)||(n=e||n,e=[]),n=n||{};for(var r=n.strict,o=!1!==n.end,i="",a=0;a<t.length;a++){var u=t[a];if("string"==typeof u)i+=c(u);else{var s=c(u.prefix),l="(?:"+u.pattern+")";e.push(u),u.repeat&&(l+="(?:"+s+l+")*"),l=u.optional?u.partial?s+"("+l+")?":"(?:"+s+"("+l+"))?":s+"("+l+")",i+=l}}var p=c(n.delimiter||"/"),h=i.slice(-p.length)===p;return r||(i=(h?i.slice(0,-p.length):i)+"(?:"+p+"(?=$))?"),i+=o?"$":r&&h?"":"(?="+p+"|$)",f(new RegExp("^"+i,d(n)),e)}function g(t,e,n){return b(e)||(n=e||n,e=[]),n=n||{},t instanceof RegExp?l(t,e):b(t)?p(t,e,n):h(t,e,n)}var b=n(7);t.exports=g,t.exports.parse=r,t.exports.compile=o,t.exports.tokensToFunction=u,t.exports.tokensToRegExp=v;var m=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g")},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e,n){"use strict";var r=n(0)(),o=r.deepCopy,i=function(){var t={},e=[],n=t,r=[];return{action:[{type:"UNDO",target:[],handler:function(){return e.length>0&&e[e.length-1]!==t?(r.push(n),e.pop()):n}},{type:"REDO",target:[],handler:function(){return r.length>0?(e.push(n),r.pop()):n}},{type:"__RESET__",target:[],handler:function(){return e=[],r=[],n}}],watcher:function(t,i){"__RESET__"!==i&&"*"!==i[0]&&("UNDO"!==i&&"REDO"!==i&&(r=[],e.push(n),e.length>21&&e.shift()),n=o(t))}}};t.exports=i}]);